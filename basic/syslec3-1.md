# JavaScriptを書いてみよう

## はじめに

第3回、第4回のテキストは初めてプログラミングに触る人向けに書きました。もし、触ったことがあるなら、適宜読み飛ばしてください。

### 今回の目標
皆さんは第1回、第2回でhtmlとcssを用いて、簡単なページを作ったと思います。今回はJavaSriptをどこに書けばいいのかがわかるのが目標です。

### 内容に入る前に
JavaScript（以下、JS）で何かできるのでしょう。
[公式のリファレンス](https://developer.mozilla.org/ja/docs/Learn/JavaScript/First_steps/What_is_JavaScript)から自分の言葉で要約していこうと思います。

第1回でも扱ったかもしれませんが、（第1回の内容を把握していません）ウェブページを作る上で、以下のように機能が分かれています。

#### HTML
これは、文章の構造を決めるんでしたね。

#### CSS
これは文章の装飾をするんですね。

さて、本題のJSですが、これは主にウェブページで複雑な機能や動きをつけるプログラミング言語です。ですから、ボタンを押したらページの色が変わるとか、ゲームを作るとか、[要素がふわりと浮かび上がってくる](https://office.cybozu.co.jp/)のとかを実装することができます。

### 補足
用語の補足をしていこうと思います。

#### プログラミング言語
プログラミングをするのにあたって、いろいろな書き方やルールがあります。それぞれを言語と呼びます。例えば、HTMLやCSSもそれぞれ異なる言語と言えます。ほかには、PythonやC++とかJava（JavaScriptとはまったく別の言語）とかの言語もあります。

ちなみに、HTMLのような文章の構造を表す言語のことをプログラミング言語ではなく、**マークアップ言語**と読んだりします。

#### コード
コードです。プログラミング言語で書く文章があると思います。その文章をコードと呼びます。プログラミング言語を書くことを「コードを書く」とか言ったりします。

* * * 

## Hello World!
何ができるか書かないとわからない思うのでとりあえず、書いてみましょう！
以下のコードをhtmlファイルの`head`タグの中に書きましょう。

```html
<script>alert("Hello World!")</script>
```

では、書いたhtmlファイルを見てください。そうすると、うえから「Hello World!」と現れたと思います。
ここで`alert()`のかっこの中に何か入れるとそれが表示されると思っといてください。

そこで、今度は、`Hello World!`の所を`こんにちは`と置き換えてください。そうすると「Hello World!」となっているところが変わりましたか？

## 一文ずつ実行される？

プログラミングをするうえで大変なのは、どういう順番で実行されるのかを把握することだと思います。

以下のコードを書いてみましょう！
```javascript
alert("Hello World!")
alert("こんにちは")
```
そうすると、「Hello World!」→「こんにちは」の順番で表示されたとおもいます。このように**基本的には**上から順番に実行されていきます。

## ファイルを分けよう

ここで、少しCSSを書いたときを思い出しましょう。おそらく、cssのファイルを分けたと思います。
同じようにJSでもファイルを分けることができます。そのほうが、機能ごとにどこを直せばいいかが見やすくなりますね。

ということで、htmlファイルと同じ階層に、`main.js`というファイルを作りましょう！ わからない場合には周りの2年生に聞いてみてください。
そして、以下のようにさっき書いたHTMLファイルのコードを変えてみてください。

```html
<script type="text/javascript" src="main.js"></script>
```
さて、htmlファイルを見てみてください。何も起きないはずです。何かを起こしてみましょう！

まず、さっきの`main.js`というファイルをVS Codeで開いてください。そして、以下のコードを追加しましょう。
```javascript
alert("Hello World")
```
はい、再びhtmlファイルを見てみてください。そうするとさっきと同じようにHello World!と出ていると思います。やった！

## デバッグをしよう！

プログラムがうまく動かない時があります。その時、動かない原因を**バグ**（bug）といいます。そして、バグを取り除くことを、デバッグ（de + bug）といいます。

では、動かない時、どのようにデバッグすればいいのでしょうか？ 今回のようにいちいちウィンドウの上にHello World!とか出していたらうっとおしいですね。というわけで、以下のように普通はします。

では、jsファイルの中を消してもらって、以下のコードを書いてみましょう！

```javascript
console.log("Hello World!")
console.log("こんにちは")
```
今度はどこに表示されたのでしょうか。ブラウザで検証を開きましょう！そして、consoleと書いている所を押してもらうと見えたでしょうか？ 今回はエラーは出ていませんが、何かエラーが出たらこのコンソールに表示されます。今後いろいろ開発するときに、こんな感じにいろいろ表示させて、これからデバッグをしていきます。

## 数字を出してみよう！

今度は数字を出してみましょう！ では、せっかく`console.log`を勉強したので、それを使って以下のように書いてみましょう!

```javascript
console.log(1)
```
では、検証を見てください。`1`と出力されているはずです。

## コメントを書こう！
開発していくに当たって1か月前に自分が書いたところを書き直すといったことをする場合がよくあります。
その時、何をしたかったのか基本的には忘れます。そういうとき、自分の書いたコードに対して、ここはこういうことをしたんだよみたいにコメントをつけたくなると思います。

では、JSでのコメントを書いてみましょう。二通りの書き方があります。
```javascript
// コメント
console.log("Hello World!")　//コメント
/*コメント*/ console.log("Hello World!")
```
`//`のほうは、`//`を書いた後ろがすべてコメントになります。

`/**/`のほうは、その中身がコメントになります。

## htmlでコメントを書くには
htmlファイルやcssファイルにコメントをかけないのかみたいな疑問を覚えたでしょう。たぶん。ちゃんと書けます。

### htmlの場合
`<!--中身-->`こんな感じのもので囲った部分がコメントとなります。
```html
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <p>Hello World!</p>
        <!--　コメント
            コメント
         -->
    </body>
</html>
```
### cssの場合
`/*中身*/`で囲った部分がコメントとなります。
```css
hoge {
    color: #ffff00;
    /*コメント*/
}
```

この章はこの辺で終わります。
# 変数

## 今章の目標
変数を自由自在に使えるようになろう！

## 変数とは

プログラムを実行するとき、プログラムはコンピューターにいろいろな値を記憶させながら処理をしていきます。例えば、

「ユーザーが入力した数値を画面に出力する」という機能を作成することを考えましょう。人間だと、相手の言った数字を覚えて、あとから紙に書き出すということができると思います。

この時、コンピューターにも同じことをさせようと思った時には、コンピューターにいろいろ覚えさせないといけません。この覚えさせる機能のことを**変数**と言ったりします。

変数のイメージをつかむにも以下の図を見てください。変数はこのような箱のようなもので、中に数字や文字を入れることで、コンピューターに記憶させることができます。

## 実際に書いていこう！

変数を使うためには二つのことをしないといけません。

1. 変数の名前を決める
2. 変数の「種類」を決める

### 名前を決める

では、まず1の変数の名前を決めるから見ていこうと思います。

変数を使うには、識別するために名前をつける必要があります。変数の名前は私たちが自由に決めることができます。例えば、「hoge」みたいな名前をつけることができます。
このような変数の名前にできる組み合わせを、**識別子**と呼んでいます。

先ほど、自由にと言いましたが、いくつかのルールがあります。

* 英字・数字・アンダースコア（_）から名前を始める。例えば、「@hoge」みたいな名前はだめです。
* JSがあらかじめ予約している名前は使うことができません。例えば、「if」という変数を使うことはできません。
* JSでは大文字小文字を区別します。しかし、開発時に、読みにくいので大文字小文字で名前を識別するのはおすすめしません。

## では、変数を使おう！
先ほどあげた2に関してはひとまず置いといて、変数を使いたいと思います！

まず、こういう変数を使うことを宣言しないといけません。（本当は宣言しなくても使えるのですが、基本的には宣言してください。）以下のように、宣言をします。

```javascript
let name
```
ここで、letは変数の「種類」です。ここはあとで説明します。「name」というところが変数の名前になります。

次に、値を箱（変数）に入れないといけませんね。この操作を**代入**と呼びます。
以下のように代入ができます。

```javascript
let name
name = 2
console.log(name)
```
このように「=」を使うことで、右のものを左に書いた変数に代入できます。ここで「=」は数学の同値とはちがった意味になるので、最初は戸惑うかもしれません。

また、`console.log(name)`の所を見てもらえればわかるようにかっこの内側に変数名とすることで、変数の中身が表示されるようになります。とりあえず、ここでは、`console.log()`はそのように使うんだと思っといてください。

ちなみに宣言と同時に値を代入できます。これを**変数を初期化する**と言います。こんな感じに書きます。

```javascript
let name = 3
console.log(name)
```

## 先ほどの2について

JavaScriptには変数の種類として主に3種類あります。`const`と`let`と`var`です。

### const
定数です。一度初期化したあと再び、代入することが許されません。使い方は、さっきの`let`の所を、`const`に変えるだけです。

エラーが出るコードです。
```javascript
const name = 3
name = 4 // エラー！！！ 
```

### letとvar
変数です。代入できます。これらの違いは後ほどわかります。

## ユーザーからの情報を受け取ろう！

さて、ただ単に表示しているだけではつまらないですね。そこで、ちゃんとユーザーからの情報を受け取りましょう！以下のコードを再び貼り付けてください。

```javascript
let num = prompt("何か入れてください")
alert(num)
```

では、サイトをみましょう。そうすると今度は、何やら打ち込めるところと質問が出てきたと思います。ここに数字を入れるとそれが表示されると思います。
とりあえず、詳しいことはいいとして、`変数 = prompr("文字")`で変数に値が代入できるんだと覚えておいてください。

この章は以上です。

# 式と演算子
## 今章の目標
いままで、やったことをちょっとおさらいしましょう。

* コンソール、画面に表示させる
* 変数に値を入れて、値を記憶しておく
* 変数の値を表示させる
* ユーザーから値を受け取って、表示させる

今度は、変数を操作したいと思います。

## 四則演算
四則演算ができます。以下のコードを見てください。
```javascript
let a = 1
let b = 1
console.log(a + b)
```

そうするとコンソールに`2`が表示されると思います。このように演算ができます。

この`+`のように変数同士を操作するものを`演算子`と呼びます。まずは四則演算をする演算子を見てみましょう。

```javascript
let a = 2
let b = 3
let c = 4
console.log(a * b) // 掛け算
console.log(c / a) // 割り算
console.log(a ** b) // べき乗
console.log(c % a) // 剰余
```

こんな感じに変数に計算結果を再び代入することもできます。
```javascript
let a = 2
let b = 3
a = a - b
console.log(a) // aは2 - 3の結果が入っているはず
```

続けて式を書くことができます。
```javascript
let a = 2
let b = 3
let c = 4
a = a + b + c
console.log(a)
```


`a = a - b`の動きにちょっと戸惑うかもしれません。慣れましょうとしか言えません。慣れましょう！

### 補足
ここは補足です。もう頭がいっぱいというなら飛ばしても大丈夫です。

先ほど、`a = a - b`というコードを書いたと思います。これは別のより短いコードで書くことができます。

```javascript
let a = 5
let b = 4
a -= b // これはa = a - bとまったく同じ
a += b // これはa = a + bとまったく同じ
a *= b // これはa = a * bとまったく同じ
a /= b // これはa = a / bとまったく同じ
```

また、以下のように1の足し引きという操作には別の書き方もあります。
```javascript
let a = 5
a++ // これはa += 1と同じ
console.log(a)
++a // こういう書き方もあります。
a-- // これはa -= 1と同じ
console.log(a)
--a // こういう書き方もあります。
```
1足すほうを**インクリメント**、1引くほうを**デクリメント**と呼びます。また、それぞれ、`++`が前につくか、後ろにつくかで、**前置インクリメント**、**後置インクリメント**と呼びます。デクリメントの場合も同様です。

これらは、前置と後置で少し挙動が違います。

```javascript
let a = 5
let b = 0
a = b++
console.log(a) // 0
console.log(b) // 1
let c = 5
let d = 0
c = ++d
console.log(c) // 6
console.log(d) // 1
```

まあ、この違いは難しいので、後になって気になったら理解しましょう。

補足終わり

## 文字を扱おう
今まで、数字を扱ってきました。こんどは文字を扱いましょう。

何はともあれ、以下のコードを書きましょう。

```javascript
let a = "こんに"
let b = "ちは！"
console.log(a + b)
```
多分結果は、`こんにちは！`となったはずです。こんな感じで、文字列に関しては、`+`を使って、結合させることができます。そこでちょっと慣れるために、もうちょっと例を見ていきたいと思います。

前章、ユーザーから値を受け取る方法について学びました。それを使って今回は表示させたいと思います。

```javascript
let a = "こんにちは！"
let name = prompt("名前を入れてください")
let b = "さん"
alert(a + name + b)
```

はい、ちゃんと表示されたでしょうか？

## ちょっと特殊なこと

時間がなさそうなら、この部分はカットです！

数値と文字列を扱う方法については習いました。では、数値と文字列を「足し算」したらどうなるでしょうか？確かめてみましょう！

```javascript
let a = 2
let b = "あいうえお"
a = a + b
console.log(a)
```
どうなりましたか？ 数字が文字列に変換されて、表示されたと思います。しかし、これでは開発時に混乱します。ちゃんと文字列に変更していることを書きましょう。そういう時に、`String(数値)`と書けばいいです。

```javascript
let a = 2
let b = "あいうえお"
a = String(a) + b
console.log(a)
```


### 補足

では、`1`とか`2`といった数字の文字列を数値に変換するにはどうすればいいでしょうか？それは`変数 = parseInt(数字の文字列)`とすれば変数に数値が入ります。

```javascript
let a = "1" // 1という文字
let b = 1
console.log(a + b) // おそらく11と表示される
a = parseInt(a)
console.log(a + b) // おそらく2と表示される
```

## なにかしよう！
さて、ここまで勉強するとできることがぐっと増えます。

ここで、ユーザーから値を受け取るにはどうしたらいいか覚えていますか？
そうですね
```javascript
let 変数 = prompt("質問")
```
とすればよかったですね。
では、ここで数学、英語と国語の点数を受け取って、合計点と平均点を返すプログラムを書いてみましょう！
<details><summary>答え</summary>
<div>

```javascript
let math = prompt("数学の点数を入力してください")
let english = prompt("英語の点数を入力してください")
let japanese = prompt("国語の点数を入力してください")

alert(math + english + japanese)
alert((math + english + japanese) / 3)
```
</div>

はい、合計点が出てきた後に、平均点が出てきましたか？

終わりのalertのところを
<div>

```javascript
alert("合計点は" + String(math + english + japanese) + "です。")
alert("平均点は" + String((math + english + japanese) / 3) + "です。")
```
</div>
とするとかっこよくなります。
</details>

この章は以上で終わりです。

# 条件式
## 目標
if、if else、else文を使えるようになる。

## if文
さて、ここから本格的にプログラミングをしていくことになります。ここで、もう一度、実行の順番は上からであることを思い出しましょう。頑張りましょう！

まず、if文です。以下のように書きます。

```javascript
if (条件式) {
    条件式が真なら処理される内容
}
```
実際に、動かす前に条件式の書き方を勉強しましょう！

以下のことは覚えるといいと思います。

### 同値
同値です。`=`ではなく、`===`とかくと同値かどうかを判定できます。

例
```javascript
let a = 1
if (a === 1) {
    console.log("aは1です")
}
```
```javascript
let a = "あ"
if (a === "あ") {
    console.log("aはあです。")
}
```

### 同値でない
同値の逆です。`!==`と書きます。なんか`=`を一つ`!`に変えた形ですね。

例
```javascript
let a = 1
if (a !== 1) {
    console.log("aは1ではないです。")
}
```
### 不等号
大小比較をします。主に、数値が入った変数同士を比較するのに使われます。

例
```javascript
let a = 1
if (a > 0) {
    console.log("aは正です。")
}
```
`≧`も使えます。この場合は、`>=`のように`=`を後ろにずらします。

例
```javascript
let a = 0
if (a >= 0) {
    console.log("aは0以上です")
}
```

### 論理演算子
数学でいう「かつ」、「または」と否定に当たります。

まず、「かつ」にあたるものから見ていこうと思います。`式 && 式`みたいにしてあげればいいです。

例
```javascript
let a = 0
let b = 12
if (a >= 0 && b >= 0) {
    console.log("aもbも負数ではないです。")
}
```

「または」は、`式 || 式`みたいにしてあげればいいです。

例
```javascript
let a = 3
let b = -12
if (a >= 0 || b >= -12) {
    console.log("aまたはbが負数ではないです。")
}
```
否定は、`!(式)`のように書き、式のところの真偽をひっくり返します。

例
```javascript
let a = 3
if (!(a < 0)) {
    console.log("aは負数ではないです。")
}
```

## else文
さて、そろそろif文では満足できなくなってきた頃でしょうか？ おそらく、条件式で偽になった時の処理を書きたいを思っているのではないでしょうか？ そういう時にelse文を使いましょう。以下のようになります。

```javascript
if (条件式) {
    条件式が真なら処理される
}
else {
    条件式が偽なら処理される
}
```

僕は、これでも満足できません。例えば、条件式で偽になった時、もう一度、if文で何かを評価したくなります。
そういう時に、if else文があります。

```javascript
if (条件式A) {
    条件式Aが真のとき
}
else if (条件式B) {
    条件式Aが偽で、条件式Bが真のとき
}
else {
    条件式Aが偽で、条件式Bも偽のとき
}
```

## 何かしよう！
当然、何かをしたくなりますよね。では、倍数の判定をしてみましょう！剰余の演算子`%`は覚えていますか？ それを使っていこうと思います。

```javascript
let num = prompt("数字を入れてください")
if (num % 4 === 0) { // 4の倍数なら
    alert("4の倍数です")
}
else if (num % 2 === 0) { // 4の倍数でなく、2の倍数なら
    alert("4の倍数ではなく、2の倍数です。")
}
else { //上のいずれでもない
    alert("4の倍数でもなく、2の倍数でもないです。")
}
```

ぜひ、ほかの条件も入れて見て、いろいろ遊んでみてください。

この章はこれで終わりです。

## 補足1
補足です。これは時間的にと頭に余裕があれば扱います。

いままで扱ってきた変数の値は何でしょうか？ おそらく、数値と文字列の2種類だと思います。これ以外にも変数の値があります。

### 真偽値
多分、は？ってなったと思います。変数には真偽の値を入れることができます。
```javascript
let a = true
let b = false
if (a) {
    console.log("真")
}
if (!b) {
    console.log("偽")
} 
```

### undefined
undefinedです。そのままで、変数が未定義のときにこの値を代入したり、もとからこの値が入っています。

```javascript
let a
console.log(a)
```

### null
nullです。僕はよくわかりません。[公式リファレンス](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/null)によると、存在しないときに用いるそうです。

```javascript
let foo = null
console.log(foo)
```

### NaN
ナンです。またまた、[公式リファレンス](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/NaN)によると、変数から数値を読み取るときに失敗したときに使われるそうです。自分では使わないとも書いてあります。

例が思い浮かばなかった。

## 補足2
補足です。わざわざ補足を書いているのは、ここをやりたかったということもあります。さて、if文の条件式にちゃんと数学的に真偽が定まるものを入れたと思います。なにが言いたいかわからないと思うので以下を実行してみてください。

```javascript
let a = 1
if (a) {
    console.log("真だよ")
}
else {
    console.log("偽だよ")
}
```
どうなりましたか。たぶん、真となったのではないでしょうか。不思議ですね。実は、JavaScriptはこんな感じで条件式では数学的な真偽を判断しているわけではないです。

試しにほかの値も入れてみてください。どうですか？ 上の`undefined`とかも試しましたか？ `0`とかも試してみるといいと思います。

ここに覚えておいてほしい真偽値の値の一覧を書いておきます。偽となるものを覚えておいてほしいです。どうせ、開発すると何度もundefinedの文字は見るからいやでも覚えます。

真となるもの

* undefined === undefined
* null === null
* 0以外の数字と文字（"0"は文字で真だよ)
* "0"

偽となるもの
* 0
* undefined
* null
* NaN
* NaN === NaN（これはおもしろいから載せた）

補足終わり

# 繰り返し

## 今章の目標
for文を使えるようになる。

さて、時間が足りるのか書いていて不安になってきました。まだまだやることはあります。

## for文を書く
繰り返したいと思ったことはないでしょうか。僕はあります。とりあえず、以下のコードを見てください。

```javascript
for(let i = 0;i < 12;i = i + 1) {
    console.log(i)
}
```
おそらく、数字が0から11まででてきたと思います。より詳しくfor文を見ていきましょう。

for文は以下のように書きます。

```javascript
for (最初に実行されるところ;繰り返しを続ける条件;1ループ終わるたびに実行される式) {
    繰り返し処理する内容
}
```

では、先ほどの例を見てみましょう。そこでどのような順番で実行されるかがわかるようになりましょう！

* まず、for文のところまで来ると`let i = 0`が実行されます。これはiという変数を0で初期化しているんですよね。

* 次に、繰り返しを続ける条件`i < 12`を見ます。この時、`i`は0なので`i < 12`は真です。よって、繰り返しを続けます。

* そして、`console.log(i)`が処理されます。つまり、コンソールに今のiの値が出力されます。

* そのあと、1ループが終わったので、`i = i + 1`が実行されます。iが1になります。

* 再び、繰り返しを続ける条件`i < 12`を見ます。

というように繰り返されて行って、最後に、iが12になったところでfor文のかっこを抜けます。

図にすると以下のようです。（図を早く出せおいという心の声が聞こえました。）

ちょっと大変ですが、丁寧に書いたつもりなので、後で追ってみてください。

## for文に慣れよう！
慣れましょう！ これがプログラムをするうえで要となる文です。

まず、12より小さい偶数を出力しましょう。とりあえず、お手本で書いてみます。

```javascript
for (let i = 0;i < 12;i = i + 2) {
    console.log(i)
}
```

今度は12より小さい以下の奇数を出力しましょう！

わかりますか？

<details><summary>答え</summary><div>

```javascript
for (let i = 1;i < 12;i = i + 2) {
    console.log(i)
}
```
という感じになると思います。

</div></details>

とりあえず、今章はこれで終わります。

## 補足

本当はもう少し書き足したかった。でも、時間が普通になさそうであきらめたやつです。

### while文
繰り返しができます。

```javascript
while(条件式) {
    繰り返し処理する内容
}
```
条件式が真の間、ずっと繰り返します。

### break文
繰り返しをやめたい時があります。そういう時にbreak文を書きます。
```javascript
for (let i = 0;i < 100;i = i + 1) {
    console.log(i)
    if (i === 5) {
        break;
    }
}
```
### continue文
逆にさっさと繰り返したい時があります。そういう時にcontinue文を使います。
```javascript
for (let i = 0;i < 12;i = i + 1){
    if (i === 5) {
        continue;
    }
    console.log(i)
}
```

### switch文
前章の話にかけばよかったのですが、忘れていた。かっこの中に入った値がcaseの値と同じとき、caseからbreakまでが処理されます。もし一致する値がなければdefaultのところが処理されます。
```javascript
switch(変数) {
    case 値:
        処理される行
        break;
    case 値:
        処理される行
        break;
    default:
        以上の値でないとき
        break;
}
```
例
```javascript
let a = 3
switch(a) {
    case 1:
        console.log("aは1です。")
        break;
    case 2:
        console.log("aは2です。")
        break;
    default:
        console.log("それ以外")
        break;
}
```
